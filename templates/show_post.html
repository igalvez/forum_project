{% macro show_comments(parent_id) %}
	{% set clist = get_comments(post.id,parent_id) %}
	{% if clist is defined %}
		{% for c in clist %}
			<div class='well'>		
				<a href="#comment{{c.id}}" data-toggle="collapse">[+]</a> &nbsp;&nbsp; <a href="{{ url_for('show_user',user_id=c.user_id) }}"> Author: {{ get_author(c.user_id) }} </a> <br/>
				<div id="comment{{c.id}}" class="collapse in">
					{{ prefix }}
					{{ c.message }}
					<br/>
					<a href="{{ url_for('write_comment', sid=sub.id, pid=post.id, cid=c.id) }}"> comment </a>
					&nbsp &nbsp <a href="{{ url_for('delete_comment', sid=sub.id, pid=post.id, cid=c.id) }}"> delete </a>
					<br/><br/>
					{{ show_comments(c.id) }}
				</div>
			</div>
		{% endfor %}
	{% endif %}
{% endmacro %}

{% extends "header.html" %}

{% block title %}
{{ post.title }}
{% endblock %}

{% block body %}
	<br/><br/>
	<h2> {{ post.title }} </h2>
	<br/>
	Author: {{ get_author(post.user_id) }} <br/>
	{{ post.message }} 
	<br/><br/><br/>
	{{ show_comments(0) }}
	<br/>
	<a href="{{ url_for('write_comment',sid=sub.id, pid=post.id, cid=0)}}">Comment </a>
	<br/><br/>
	<a href="{{ url_for('show_sub',sid=sub.id) }}"> Back </a>

{% endblock %}
